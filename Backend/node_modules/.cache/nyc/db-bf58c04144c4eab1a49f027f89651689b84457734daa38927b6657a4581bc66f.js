function cov_19ygd99iu0(){var path="/home/azra/Desktop/TicketMS/Backend/db.js";var hash="c0178443e3a47397fbdb0b929c295b95da986439";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/azra/Desktop/TicketMS/Backend/db.js",statementMap:{"0":{start:{line:1,column:13},end:{line:1,column:32}},"1":{start:{line:3,column:13},end:{line:9,column:2}},"2":{start:{line:10,column:0},end:{line:10,column:20}}},fnMap:{},branchMap:{},s:{"0":0,"1":0,"2":0},f:{},b:{},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c0178443e3a47397fbdb0b929c295b95da986439"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_19ygd99iu0=function(){return actualCoverage;};}return actualCoverage;}cov_19ygd99iu0();const Pool=(cov_19ygd99iu0().s[0]++,require("pg").Pool);const pool=(cov_19ygd99iu0().s[1]++,new Pool({user:'postgres',host:'localhost',database:'postgres',password:'azra123',port:5432}));cov_19ygd99iu0().s[2]++;module.exports=pool;// describe('PUT /tickets/:ticketid', () => {
//     afterEach(() => {
//       chai.spy.restore();
//     });
//     it('should return a 400 error if the request body is empty', async () => {
//       const ticketid = 1;
//       const updateData = {};
//       const res = await chai.request(app)
//         .put(`/tickets/${ticketid}`)
//         .send(updateData);
//       expect(res).to.have.status(400);
//       expect(res.body).to.have.property('message').to.eql('Empty request body');
//     });
//     it('should return a 404 error if the ticketid does not exist', async () => {
//       const ticketid = 999;
//       const updateData = {
//         status: 'in progress',
//       };
//       const res = await chai.request(app)
//         .put(`/tickets/${ticketid}`)
//         .send(updateData);
//       expect(res).to.have.status(404);
//       expect(res.body).to.have.property('message').to.eql('Ticket ID does not exist');
//     });
//     it('should update the ticket and return a success message', async () => {
//       const ticketid = 1;
//       const updateData = {
//         status: 'In Progress',
//         priority: 'Low',
//         title: 'Updated Ticket Title',
//         description: 'Updated Ticket Description',
//       };
//       chai.spy.on(pool, 'query');
//       const res = await chai.request(app)
//         .put(`/tickets/${ticketid}`)
//         .send(updateData);
//       expect(res).to.have.status(200);
//       expect(res.body).to.have.property('message').to.eql('Ticket updated');
//       expect(res.body.ticket).to.have.property('status').to.eql(updateData.status);
//       expect(res.body.ticket).to.have.property('priority').to.eql(updateData.priority);
//       expect(res.body.ticket).to.have.property('title').to.eql(updateData.title);
//       expect(res.body.ticket).to.have.property('description').to.eql(updateData.description);
//        expect(pool.query).to.have.been.called.with(
//       'UPDATE tickets SET status = $1, priority = $2, title = $3, description = $4 WHERE id = $5',
//       [updateData.status, updateData.priority, updateData.title, updateData.description, ticketid]
//     );
//     });
//     it('should update ticket status if the status transition is valid', async () => {
//       const ticketId = 1;
//       const newStatus = 'In Progress';
//       const currentStatus = 'Open';
//       const statusOptions = ['Open', 'In Progress', 'Completed'];
//       const selectedStatusObj = statusOptions.indexOf(newStatus);
//       const currentStatusObj = statusOptions.indexOf(currentStatus);
//       const spy = chai.spy.on(pool, 'query');
//       const res = await chai.request(app)
//         .put(`/tickets/${ticketId}`)
//         .send({
//           status: newStatus
//         });
//       expect(res).to.have.status(200);
//       expect(res.body).to.be.a('object');
//       expect(res.body).to.have.property('message').eql('Ticket updated');
//       expect(res.body.ticket).to.have.property('status').eql(newStatus);
//       expect(pool.query).to.have.been.called.exactly(2);
//       const expectedQuery1 = `SELECT ticketid, status FROM Tickets WHERE ticketid = $1`;
//       const expectedQuery2 = `UPDATE Tickets SET status = $1 WHERE ticketid = $2`;
//       expect(pool.query).to.have.been.called.with(expectedQuery1, [ticketId]);
//       expect(pool.query).to.have.been.called.with(expectedQuery2, [newStatus, ticketId]);
//       expect(Math.abs(currentStatusObj - selectedStatusObj)).to.equal(1);
//     });
//       it('should return an error if status transition is invalid', async () => {
//         const ticketId = 1;
//         const newStatus = 'Open';
//         const currentStatus = 'Completed';
//         const statusOptions = ['Open', 'In progress', 'Completed'];
//         const selectedStatusObj = statusOptions.indexOf(newStatus);
//         const currentStatusObj = statusOptions.indexOf(currentStatus);
//         const spy = chai.spy.on(pool, 'query');
//         chai.request(app)
//           .put(`/tickets/${ticketId}`)
//           .send({
//             status: newStatus
//           })
//           .end((err, res) => {
//             res.should.have.status(400);
//             res.body.should.be.a('object');
//             res.body.should.have.property('message').eql('Invalid status transition');
//             chai.expect(pool.query).to.have.been.called.exactly(1);
//             const expectedQuery = `SELECT ticketid, status FROM Tickets WHERE ticketid = ${ticketId}`;
//            chai.expect(pool.query).to.have.been.called.with(expectedQuery);
//             chai.expect(Math.abs(currentStatusObj - selectedStatusObj)).to.not.equal(1);
//           });
//       });
//     });
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMTl5Z2Q5OWl1MCIsImFjdHVhbENvdmVyYWdlIiwiUG9vbCIsInMiLCJyZXF1aXJlIiwicG9vbCIsInVzZXIiLCJob3N0IiwiZGF0YWJhc2UiLCJwYXNzd29yZCIsInBvcnQiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiZGIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgUG9vbCA9IHJlcXVpcmUgKFwicGdcIikuUG9vbDtcblxuY29uc3QgcG9vbCA9IG5ldyBQb29sKHtcbiAgICB1c2VyOiAncG9zdGdyZXMnLFxuICAgIGhvc3Q6ICdsb2NhbGhvc3QnLFxuICAgIGRhdGFiYXNlOiAncG9zdGdyZXMnLFxuICAgIHBhc3N3b3JkOiAnYXpyYTEyMycsXG4gICAgcG9ydDogNTQzMlxufSk7XG5tb2R1bGUuZXhwb3J0cz1wb29sO1xuXG5cbi8vIGRlc2NyaWJlKCdQVVQgL3RpY2tldHMvOnRpY2tldGlkJywgKCkgPT4ge1xuLy8gICAgIGFmdGVyRWFjaCgoKSA9PiB7XG4vLyAgICAgICBjaGFpLnNweS5yZXN0b3JlKCk7XG4vLyAgICAgfSk7XG4vLyAgICAgaXQoJ3Nob3VsZCByZXR1cm4gYSA0MDAgZXJyb3IgaWYgdGhlIHJlcXVlc3QgYm9keSBpcyBlbXB0eScsIGFzeW5jICgpID0+IHtcbi8vICAgICAgIGNvbnN0IHRpY2tldGlkID0gMTtcbi8vICAgICAgIGNvbnN0IHVwZGF0ZURhdGEgPSB7fTtcbi8vICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGNoYWkucmVxdWVzdChhcHApXG4vLyAgICAgICAgIC5wdXQoYC90aWNrZXRzLyR7dGlja2V0aWR9YClcbi8vICAgICAgICAgLnNlbmQodXBkYXRlRGF0YSk7XG4vLyAgICAgICBleHBlY3QocmVzKS50by5oYXZlLnN0YXR1cyg0MDApO1xuLy8gICAgICAgZXhwZWN0KHJlcy5ib2R5KS50by5oYXZlLnByb3BlcnR5KCdtZXNzYWdlJykudG8uZXFsKCdFbXB0eSByZXF1ZXN0IGJvZHknKTtcbi8vICAgICB9KTtcbiAgXG4vLyAgICAgaXQoJ3Nob3VsZCByZXR1cm4gYSA0MDQgZXJyb3IgaWYgdGhlIHRpY2tldGlkIGRvZXMgbm90IGV4aXN0JywgYXN5bmMgKCkgPT4ge1xuLy8gICAgICAgY29uc3QgdGlja2V0aWQgPSA5OTk7XG4vLyAgICAgICBjb25zdCB1cGRhdGVEYXRhID0ge1xuLy8gICAgICAgICBzdGF0dXM6ICdpbiBwcm9ncmVzcycsXG4vLyAgICAgICB9O1xuLy8gICAgICAgY29uc3QgcmVzID0gYXdhaXQgY2hhaS5yZXF1ZXN0KGFwcClcbi8vICAgICAgICAgLnB1dChgL3RpY2tldHMvJHt0aWNrZXRpZH1gKVxuLy8gICAgICAgICAuc2VuZCh1cGRhdGVEYXRhKTtcbi8vICAgICAgIGV4cGVjdChyZXMpLnRvLmhhdmUuc3RhdHVzKDQwNCk7XG4vLyAgICAgICBleHBlY3QocmVzLmJvZHkpLnRvLmhhdmUucHJvcGVydHkoJ21lc3NhZ2UnKS50by5lcWwoJ1RpY2tldCBJRCBkb2VzIG5vdCBleGlzdCcpO1xuLy8gICAgIH0pO1xuICBcbi8vICAgICBpdCgnc2hvdWxkIHVwZGF0ZSB0aGUgdGlja2V0IGFuZCByZXR1cm4gYSBzdWNjZXNzIG1lc3NhZ2UnLCBhc3luYyAoKSA9PiB7XG4vLyAgICAgICBjb25zdCB0aWNrZXRpZCA9IDE7XG4vLyAgICAgICBjb25zdCB1cGRhdGVEYXRhID0ge1xuLy8gICAgICAgICBzdGF0dXM6ICdJbiBQcm9ncmVzcycsXG4vLyAgICAgICAgIHByaW9yaXR5OiAnTG93Jyxcbi8vICAgICAgICAgdGl0bGU6ICdVcGRhdGVkIFRpY2tldCBUaXRsZScsXG4vLyAgICAgICAgIGRlc2NyaXB0aW9uOiAnVXBkYXRlZCBUaWNrZXQgRGVzY3JpcHRpb24nLFxuLy8gICAgICAgfTtcbiAgICAgIFxuLy8gICAgICAgY2hhaS5zcHkub24ocG9vbCwgJ3F1ZXJ5Jyk7XG4gIFxuLy8gICAgICAgY29uc3QgcmVzID0gYXdhaXQgY2hhaS5yZXF1ZXN0KGFwcClcbi8vICAgICAgICAgLnB1dChgL3RpY2tldHMvJHt0aWNrZXRpZH1gKVxuLy8gICAgICAgICAuc2VuZCh1cGRhdGVEYXRhKTtcbi8vICAgICAgIGV4cGVjdChyZXMpLnRvLmhhdmUuc3RhdHVzKDIwMCk7XG4vLyAgICAgICBleHBlY3QocmVzLmJvZHkpLnRvLmhhdmUucHJvcGVydHkoJ21lc3NhZ2UnKS50by5lcWwoJ1RpY2tldCB1cGRhdGVkJyk7XG4vLyAgICAgICBleHBlY3QocmVzLmJvZHkudGlja2V0KS50by5oYXZlLnByb3BlcnR5KCdzdGF0dXMnKS50by5lcWwodXBkYXRlRGF0YS5zdGF0dXMpO1xuLy8gICAgICAgZXhwZWN0KHJlcy5ib2R5LnRpY2tldCkudG8uaGF2ZS5wcm9wZXJ0eSgncHJpb3JpdHknKS50by5lcWwodXBkYXRlRGF0YS5wcmlvcml0eSk7XG4vLyAgICAgICBleHBlY3QocmVzLmJvZHkudGlja2V0KS50by5oYXZlLnByb3BlcnR5KCd0aXRsZScpLnRvLmVxbCh1cGRhdGVEYXRhLnRpdGxlKTtcbi8vICAgICAgIGV4cGVjdChyZXMuYm9keS50aWNrZXQpLnRvLmhhdmUucHJvcGVydHkoJ2Rlc2NyaXB0aW9uJykudG8uZXFsKHVwZGF0ZURhdGEuZGVzY3JpcHRpb24pO1xuLy8gICAgICAgIGV4cGVjdChwb29sLnF1ZXJ5KS50by5oYXZlLmJlZW4uY2FsbGVkLndpdGgoXG4vLyAgICAgICAnVVBEQVRFIHRpY2tldHMgU0VUIHN0YXR1cyA9ICQxLCBwcmlvcml0eSA9ICQyLCB0aXRsZSA9ICQzLCBkZXNjcmlwdGlvbiA9ICQ0IFdIRVJFIGlkID0gJDUnLFxuLy8gICAgICAgW3VwZGF0ZURhdGEuc3RhdHVzLCB1cGRhdGVEYXRhLnByaW9yaXR5LCB1cGRhdGVEYXRhLnRpdGxlLCB1cGRhdGVEYXRhLmRlc2NyaXB0aW9uLCB0aWNrZXRpZF1cbi8vICAgICApO1xuLy8gICAgIH0pO1xuICBcbi8vICAgICBpdCgnc2hvdWxkIHVwZGF0ZSB0aWNrZXQgc3RhdHVzIGlmIHRoZSBzdGF0dXMgdHJhbnNpdGlvbiBpcyB2YWxpZCcsIGFzeW5jICgpID0+IHtcbi8vICAgICAgIGNvbnN0IHRpY2tldElkID0gMTtcbi8vICAgICAgIGNvbnN0IG5ld1N0YXR1cyA9ICdJbiBQcm9ncmVzcyc7XG4vLyAgICAgICBjb25zdCBjdXJyZW50U3RhdHVzID0gJ09wZW4nO1xuLy8gICAgICAgY29uc3Qgc3RhdHVzT3B0aW9ucyA9IFsnT3BlbicsICdJbiBQcm9ncmVzcycsICdDb21wbGV0ZWQnXTtcbi8vICAgICAgIGNvbnN0IHNlbGVjdGVkU3RhdHVzT2JqID0gc3RhdHVzT3B0aW9ucy5pbmRleE9mKG5ld1N0YXR1cyk7XG4vLyAgICAgICBjb25zdCBjdXJyZW50U3RhdHVzT2JqID0gc3RhdHVzT3B0aW9ucy5pbmRleE9mKGN1cnJlbnRTdGF0dXMpO1xuLy8gICAgICAgY29uc3Qgc3B5ID0gY2hhaS5zcHkub24ocG9vbCwgJ3F1ZXJ5Jyk7XG4vLyAgICAgICBjb25zdCByZXMgPSBhd2FpdCBjaGFpLnJlcXVlc3QoYXBwKVxuLy8gICAgICAgICAucHV0KGAvdGlja2V0cy8ke3RpY2tldElkfWApXG4vLyAgICAgICAgIC5zZW5kKHtcbi8vICAgICAgICAgICBzdGF0dXM6IG5ld1N0YXR1c1xuLy8gICAgICAgICB9KTtcbi8vICAgICAgIGV4cGVjdChyZXMpLnRvLmhhdmUuc3RhdHVzKDIwMCk7XG4vLyAgICAgICBleHBlY3QocmVzLmJvZHkpLnRvLmJlLmEoJ29iamVjdCcpO1xuLy8gICAgICAgZXhwZWN0KHJlcy5ib2R5KS50by5oYXZlLnByb3BlcnR5KCdtZXNzYWdlJykuZXFsKCdUaWNrZXQgdXBkYXRlZCcpO1xuLy8gICAgICAgZXhwZWN0KHJlcy5ib2R5LnRpY2tldCkudG8uaGF2ZS5wcm9wZXJ0eSgnc3RhdHVzJykuZXFsKG5ld1N0YXR1cyk7XG4vLyAgICAgICBleHBlY3QocG9vbC5xdWVyeSkudG8uaGF2ZS5iZWVuLmNhbGxlZC5leGFjdGx5KDIpO1xuLy8gICAgICAgY29uc3QgZXhwZWN0ZWRRdWVyeTEgPSBgU0VMRUNUIHRpY2tldGlkLCBzdGF0dXMgRlJPTSBUaWNrZXRzIFdIRVJFIHRpY2tldGlkID0gJDFgO1xuLy8gICAgICAgY29uc3QgZXhwZWN0ZWRRdWVyeTIgPSBgVVBEQVRFIFRpY2tldHMgU0VUIHN0YXR1cyA9ICQxIFdIRVJFIHRpY2tldGlkID0gJDJgO1xuLy8gICAgICAgZXhwZWN0KHBvb2wucXVlcnkpLnRvLmhhdmUuYmVlbi5jYWxsZWQud2l0aChleHBlY3RlZFF1ZXJ5MSwgW3RpY2tldElkXSk7XG4vLyAgICAgICBleHBlY3QocG9vbC5xdWVyeSkudG8uaGF2ZS5iZWVuLmNhbGxlZC53aXRoKGV4cGVjdGVkUXVlcnkyLCBbbmV3U3RhdHVzLCB0aWNrZXRJZF0pO1xuLy8gICAgICAgZXhwZWN0KE1hdGguYWJzKGN1cnJlbnRTdGF0dXNPYmogLSBzZWxlY3RlZFN0YXR1c09iaikpLnRvLmVxdWFsKDEpO1xuLy8gICAgIH0pO1xuICAgIFxuLy8gICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gYW4gZXJyb3IgaWYgc3RhdHVzIHRyYW5zaXRpb24gaXMgaW52YWxpZCcsIGFzeW5jICgpID0+IHtcbi8vICAgICAgICAgY29uc3QgdGlja2V0SWQgPSAxO1xuLy8gICAgICAgICBjb25zdCBuZXdTdGF0dXMgPSAnT3Blbic7XG4vLyAgICAgICAgIGNvbnN0IGN1cnJlbnRTdGF0dXMgPSAnQ29tcGxldGVkJztcbi8vICAgICAgICAgY29uc3Qgc3RhdHVzT3B0aW9ucyA9IFsnT3BlbicsICdJbiBwcm9ncmVzcycsICdDb21wbGV0ZWQnXTtcbi8vICAgICAgICAgY29uc3Qgc2VsZWN0ZWRTdGF0dXNPYmogPSBzdGF0dXNPcHRpb25zLmluZGV4T2YobmV3U3RhdHVzKTtcbi8vICAgICAgICAgY29uc3QgY3VycmVudFN0YXR1c09iaiA9IHN0YXR1c09wdGlvbnMuaW5kZXhPZihjdXJyZW50U3RhdHVzKTtcbi8vICAgICAgICAgY29uc3Qgc3B5ID0gY2hhaS5zcHkub24ocG9vbCwgJ3F1ZXJ5Jyk7XG4vLyAgICAgICAgIGNoYWkucmVxdWVzdChhcHApXG4vLyAgICAgICAgICAgLnB1dChgL3RpY2tldHMvJHt0aWNrZXRJZH1gKVxuLy8gICAgICAgICAgIC5zZW5kKHtcbi8vICAgICAgICAgICAgIHN0YXR1czogbmV3U3RhdHVzXG4vLyAgICAgICAgICAgfSlcbi8vICAgICAgICAgICAuZW5kKChlcnIsIHJlcykgPT4ge1xuLy8gICAgICAgICAgICAgcmVzLnNob3VsZC5oYXZlLnN0YXR1cyg0MDApO1xuLy8gICAgICAgICAgICAgcmVzLmJvZHkuc2hvdWxkLmJlLmEoJ29iamVjdCcpO1xuLy8gICAgICAgICAgICAgcmVzLmJvZHkuc2hvdWxkLmhhdmUucHJvcGVydHkoJ21lc3NhZ2UnKS5lcWwoJ0ludmFsaWQgc3RhdHVzIHRyYW5zaXRpb24nKTtcbi8vICAgICAgICAgICAgIGNoYWkuZXhwZWN0KHBvb2wucXVlcnkpLnRvLmhhdmUuYmVlbi5jYWxsZWQuZXhhY3RseSgxKTtcbi8vICAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkUXVlcnkgPSBgU0VMRUNUIHRpY2tldGlkLCBzdGF0dXMgRlJPTSBUaWNrZXRzIFdIRVJFIHRpY2tldGlkID0gJHt0aWNrZXRJZH1gO1xuLy8gICAgICAgICAgICBjaGFpLmV4cGVjdChwb29sLnF1ZXJ5KS50by5oYXZlLmJlZW4uY2FsbGVkLndpdGgoZXhwZWN0ZWRRdWVyeSk7XG4vLyAgICAgICAgICAgICBjaGFpLmV4cGVjdChNYXRoLmFicyhjdXJyZW50U3RhdHVzT2JqIC0gc2VsZWN0ZWRTdGF0dXNPYmopKS50by5ub3QuZXF1YWwoMSk7XG4vLyAgICAgICAgICAgfSk7XG4vLyAgICAgICB9KTtcbiAgICAgIFxuLy8gICAgIH0pO1xuICAiXSwibWFwcGluZ3MiOiJvdkJBZVk7QUFBQUEsY0FBQSxTQUFBQSxDQUFBLFNBQUFDLGNBQUEsV0FBQUEsY0FBQSxFQUFBRCxjQUFBLEdBZlosS0FBTSxDQUFBRSxJQUFJLEVBQUFGLGNBQUEsR0FBQUcsQ0FBQSxNQUFHQyxPQUFPLENBQUUsSUFBSSxDQUFDLENBQUNGLElBQUksRUFFaEMsS0FBTSxDQUFBRyxJQUFJLEVBQUFMLGNBQUEsR0FBQUcsQ0FBQSxNQUFHLEdBQUksQ0FBQUQsSUFBSSxDQUFDLENBQ2xCSSxJQUFJLENBQUUsVUFBVSxDQUNoQkMsSUFBSSxDQUFFLFdBQVcsQ0FDakJDLFFBQVEsQ0FBRSxVQUFVLENBQ3BCQyxRQUFRLENBQUUsU0FBUyxDQUNuQkMsSUFBSSxDQUFFLElBQ1YsQ0FBQyxDQUFDLEVBQUNWLGNBQUEsR0FBQUcsQ0FBQSxNQUNIUSxNQUFNLENBQUNDLE9BQU8sQ0FBQ1AsSUFBSSxDQUduQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBIn0=