function cov_19ygd99iu0(){var path="/home/azra/Desktop/TicketMS/Backend/db.js";var hash="ac88dde9d94c1d098fe88d21d316895c0a45b4f4";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/azra/Desktop/TicketMS/Backend/db.js",statementMap:{"0":{start:{line:1,column:13},end:{line:1,column:32}},"1":{start:{line:3,column:13},end:{line:9,column:2}},"2":{start:{line:10,column:0},end:{line:10,column:20}},"3":{start:{line:13,column:0},end:{line:26,column:5}},"4":{start:{line:14,column:21},end:{line:14,column:22}},"5":{start:{line:15,column:23},end:{line:17,column:5}},"6":{start:{line:18,column:16},end:{line:20,column:23}},"7":{start:{line:21,column:4},end:{line:21,column:36}},"8":{start:{line:22,column:4},end:{line:22,column:87}},"9":{start:{line:24,column:26},end:{line:24,column:65}},"10":{start:{line:25,column:4},end:{line:25,column:52}},"11":{start:{line:28,column:2},end:{line:40,column:5}},"12":{start:{line:29,column:21},end:{line:29,column:22}},"13":{start:{line:30,column:23},end:{line:32,column:5}},"14":{start:{line:34,column:4},end:{line:34,column:82}},"15":{start:{line:34,column:45},end:{line:34,column:78}},"16":{start:{line:35,column:16},end:{line:37,column:23}},"17":{start:{line:38,column:4},end:{line:38,column:36}},"18":{start:{line:39,column:4},end:{line:39,column:83}},"19":{start:{line:41,column:2},end:{line:53,column:5}},"20":{start:{line:42,column:21},end:{line:42,column:22}},"21":{start:{line:43,column:23},end:{line:45,column:5}},"22":{start:{line:47,column:4},end:{line:47,column:82}},"23":{start:{line:47,column:45},end:{line:47,column:78}},"24":{start:{line:48,column:16},end:{line:50,column:23}},"25":{start:{line:51,column:4},end:{line:51,column:36}},"26":{start:{line:52,column:4},end:{line:52,column:83}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:13,column:67},end:{line:13,column:68}},loc:{start:{line:13,column:79},end:{line:26,column:3}},line:13},"1":{name:"(anonymous_1)",decl:{start:{line:28,column:64},end:{line:28,column:65}},loc:{start:{line:28,column:76},end:{line:40,column:3}},line:28},"2":{name:"(anonymous_2)",decl:{start:{line:34,column:37},end:{line:34,column:38}},loc:{start:{line:34,column:43},end:{line:34,column:80}},line:34},"3":{name:"(anonymous_3)",decl:{start:{line:41,column:64},end:{line:41,column:65}},loc:{start:{line:41,column:76},end:{line:53,column:3}},line:41},"4":{name:"(anonymous_4)",decl:{start:{line:47,column:37},end:{line:47,column:38}},loc:{start:{line:47,column:43},end:{line:47,column:80}},line:47}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0},b:{},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ac88dde9d94c1d098fe88d21d316895c0a45b4f4"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_19ygd99iu0=function(){return actualCoverage;};}return actualCoverage;}cov_19ygd99iu0();const Pool=(cov_19ygd99iu0().s[0]++,require("pg").Pool);const pool=(cov_19ygd99iu0().s[1]++,new Pool({user:'postgres',host:'localhost',database:'postgres',password:'azra123',port:5432}));cov_19ygd99iu0().s[2]++;module.exports=pool;cov_19ygd99iu0().s[3]++;it('should update the ticket status if the request body is valid',async()=>{cov_19ygd99iu0().f[0]++;const ticketid=(cov_19ygd99iu0().s[4]++,1);const updateData=(cov_19ygd99iu0().s[5]++,{status:'resolved'});const res=(cov_19ygd99iu0().s[6]++,await chai.request(app).put(`/tickets/${ticketid}`).send(updateData));cov_19ygd99iu0().s[7]++;expect(res).to.have.status(200);cov_19ygd99iu0().s[8]++;expect(res.body).to.have.property('message').to.eql('Ticket updated successfully');// Verify that the ticket status was updated
const updatedTicket=(cov_19ygd99iu0().s[9]++,await Ticket.findOne({_id:ticketid}));cov_19ygd99iu0().s[10]++;expect(updatedTicket.status).to.eql('resolved');});cov_19ygd99iu0().s[11]++;it('should return a 500 error if the update operation fails',async()=>{cov_19ygd99iu0().f[1]++;const ticketid=(cov_19ygd99iu0().s[12]++,1);const updateData=(cov_19ygd99iu0().s[13]++,{status:'in progress'});// Simulate a database error by spying on the Ticket model's updateOne method and throwing an error
cov_19ygd99iu0().s[14]++;chai.spy.on(Ticket,'updateOne',()=>{cov_19ygd99iu0().f[2]++;cov_19ygd99iu0().s[15]++;throw new Error('Database error');});const res=(cov_19ygd99iu0().s[16]++,await chai.request(app).put(`/tickets/${ticketid}`).send(updateData));cov_19ygd99iu0().s[17]++;expect(res).to.have.status(500);cov_19ygd99iu0().s[18]++;expect(res.body).to.have.property('message').to.eql('Failed to update ticket');});cov_19ygd99iu0().s[19]++;it('should return a 500 error if the update operation fails',async()=>{cov_19ygd99iu0().f[3]++;const ticketid=(cov_19ygd99iu0().s[20]++,1);const updateData=(cov_19ygd99iu0().s[21]++,{status:'in progress'});// Simulate a database error by spying on the Ticket model's updateOne method and throwing an error
cov_19ygd99iu0().s[22]++;chai.spy.on(Ticket,'updateOne',()=>{cov_19ygd99iu0().f[4]++;cov_19ygd99iu0().s[23]++;throw new Error('Database error');});const res=(cov_19ygd99iu0().s[24]++,await chai.request(app).put(`/tickets/${ticketid}`).send(updateData));cov_19ygd99iu0().s[25]++;expect(res).to.have.status(500);cov_19ygd99iu0().s[26]++;expect(res.body).to.have.property('message').to.eql('Failed to update ticket');});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMTl5Z2Q5OWl1MCIsImFjdHVhbENvdmVyYWdlIiwiUG9vbCIsInMiLCJyZXF1aXJlIiwicG9vbCIsInVzZXIiLCJob3N0IiwiZGF0YWJhc2UiLCJwYXNzd29yZCIsInBvcnQiLCJtb2R1bGUiLCJleHBvcnRzIiwiaXQiLCJmIiwidGlja2V0aWQiLCJ1cGRhdGVEYXRhIiwic3RhdHVzIiwicmVzIiwiY2hhaSIsInJlcXVlc3QiLCJhcHAiLCJwdXQiLCJzZW5kIiwiZXhwZWN0IiwidG8iLCJoYXZlIiwiYm9keSIsInByb3BlcnR5IiwiZXFsIiwidXBkYXRlZFRpY2tldCIsIlRpY2tldCIsImZpbmRPbmUiLCJfaWQiLCJzcHkiLCJvbiIsIkVycm9yIl0sInNvdXJjZXMiOlsiZGIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgUG9vbCA9IHJlcXVpcmUgKFwicGdcIikuUG9vbDtcblxuY29uc3QgcG9vbCA9IG5ldyBQb29sKHtcbiAgICB1c2VyOiAncG9zdGdyZXMnLFxuICAgIGhvc3Q6ICdsb2NhbGhvc3QnLFxuICAgIGRhdGFiYXNlOiAncG9zdGdyZXMnLFxuICAgIHBhc3N3b3JkOiAnYXpyYTEyMycsXG4gICAgcG9ydDogNTQzMlxufSk7XG5tb2R1bGUuZXhwb3J0cz1wb29sO1xuXG5cbml0KCdzaG91bGQgdXBkYXRlIHRoZSB0aWNrZXQgc3RhdHVzIGlmIHRoZSByZXF1ZXN0IGJvZHkgaXMgdmFsaWQnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgdGlja2V0aWQgPSAxO1xuICAgIGNvbnN0IHVwZGF0ZURhdGEgPSB7XG4gICAgICBzdGF0dXM6ICdyZXNvbHZlZCcsXG4gICAgfTtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBjaGFpLnJlcXVlc3QoYXBwKVxuICAgICAgLnB1dChgL3RpY2tldHMvJHt0aWNrZXRpZH1gKVxuICAgICAgLnNlbmQodXBkYXRlRGF0YSk7XG4gICAgZXhwZWN0KHJlcykudG8uaGF2ZS5zdGF0dXMoMjAwKTtcbiAgICBleHBlY3QocmVzLmJvZHkpLnRvLmhhdmUucHJvcGVydHkoJ21lc3NhZ2UnKS50by5lcWwoJ1RpY2tldCB1cGRhdGVkIHN1Y2Nlc3NmdWxseScpO1xuICAgIC8vIFZlcmlmeSB0aGF0IHRoZSB0aWNrZXQgc3RhdHVzIHdhcyB1cGRhdGVkXG4gICAgY29uc3QgdXBkYXRlZFRpY2tldCA9IGF3YWl0IFRpY2tldC5maW5kT25lKHsgX2lkOiB0aWNrZXRpZCB9KTtcbiAgICBleHBlY3QodXBkYXRlZFRpY2tldC5zdGF0dXMpLnRvLmVxbCgncmVzb2x2ZWQnKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCByZXR1cm4gYSA1MDAgZXJyb3IgaWYgdGhlIHVwZGF0ZSBvcGVyYXRpb24gZmFpbHMnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgdGlja2V0aWQgPSAxO1xuICAgIGNvbnN0IHVwZGF0ZURhdGEgPSB7XG4gICAgICBzdGF0dXM6ICdpbiBwcm9ncmVzcycsXG4gICAgfTtcbiAgICAvLyBTaW11bGF0ZSBhIGRhdGFiYXNlIGVycm9yIGJ5IHNweWluZyBvbiB0aGUgVGlja2V0IG1vZGVsJ3MgdXBkYXRlT25lIG1ldGhvZCBhbmQgdGhyb3dpbmcgYW4gZXJyb3JcbiAgICBjaGFpLnNweS5vbihUaWNrZXQsICd1cGRhdGVPbmUnLCAoKSA9PiB7IHRocm93IG5ldyBFcnJvcignRGF0YWJhc2UgZXJyb3InKSB9KTtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBjaGFpLnJlcXVlc3QoYXBwKVxuICAgICAgLnB1dChgL3RpY2tldHMvJHt0aWNrZXRpZH1gKVxuICAgICAgLnNlbmQodXBkYXRlRGF0YSk7XG4gICAgZXhwZWN0KHJlcykudG8uaGF2ZS5zdGF0dXMoNTAwKTtcbiAgICBleHBlY3QocmVzLmJvZHkpLnRvLmhhdmUucHJvcGVydHkoJ21lc3NhZ2UnKS50by5lcWwoJ0ZhaWxlZCB0byB1cGRhdGUgdGlja2V0Jyk7XG4gIH0pO1xuICBpdCgnc2hvdWxkIHJldHVybiBhIDUwMCBlcnJvciBpZiB0aGUgdXBkYXRlIG9wZXJhdGlvbiBmYWlscycsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCB0aWNrZXRpZCA9IDE7XG4gICAgY29uc3QgdXBkYXRlRGF0YSA9IHtcbiAgICAgIHN0YXR1czogJ2luIHByb2dyZXNzJyxcbiAgICB9O1xuICAgIC8vIFNpbXVsYXRlIGEgZGF0YWJhc2UgZXJyb3IgYnkgc3B5aW5nIG9uIHRoZSBUaWNrZXQgbW9kZWwncyB1cGRhdGVPbmUgbWV0aG9kIGFuZCB0aHJvd2luZyBhbiBlcnJvclxuICAgIGNoYWkuc3B5Lm9uKFRpY2tldCwgJ3VwZGF0ZU9uZScsICgpID0+IHsgdGhyb3cgbmV3IEVycm9yKCdEYXRhYmFzZSBlcnJvcicpIH0pO1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGNoYWkucmVxdWVzdChhcHApXG4gICAgICAucHV0KGAvdGlja2V0cy8ke3RpY2tldGlkfWApXG4gICAgICAuc2VuZCh1cGRhdGVEYXRhKTtcbiAgICBleHBlY3QocmVzKS50by5oYXZlLnN0YXR1cyg1MDApO1xuICAgIGV4cGVjdChyZXMuYm9keSkudG8uaGF2ZS5wcm9wZXJ0eSgnbWVzc2FnZScpLnRvLmVxbCgnRmFpbGVkIHRvIHVwZGF0ZSB0aWNrZXQnKTtcbiAgfSk7XG4gIFxuXG5cblxuIl0sIm1hcHBpbmdzIjoiaTlGQWVZO0FBQUFBLGNBQUEsU0FBQUEsQ0FBQSxTQUFBQyxjQUFBLFdBQUFBLGNBQUEsRUFBQUQsY0FBQSxHQWZaLEtBQU0sQ0FBQUUsSUFBSSxFQUFBRixjQUFBLEdBQUFHLENBQUEsTUFBR0MsT0FBTyxDQUFFLElBQUksQ0FBQyxDQUFDRixJQUFJLEVBRWhDLEtBQU0sQ0FBQUcsSUFBSSxFQUFBTCxjQUFBLEdBQUFHLENBQUEsTUFBRyxHQUFJLENBQUFELElBQUksQ0FBQyxDQUNsQkksSUFBSSxDQUFFLFVBQVUsQ0FDaEJDLElBQUksQ0FBRSxXQUFXLENBQ2pCQyxRQUFRLENBQUUsVUFBVSxDQUNwQkMsUUFBUSxDQUFFLFNBQVMsQ0FDbkJDLElBQUksQ0FBRSxJQUNWLENBQUMsQ0FB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